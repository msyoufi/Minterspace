@if (!watchlistService.watchlists$().length) {
<button type="button" class="ms-button add-button" (click)="openNameForm('create')">
  Add a new watchlist +
</button>

} @else if (watchlistService.currentWatchlist$()) {
<div class="select-menu-container" (msClickOutside)="closeSelectMenu()">
  <button type="button" class="select-menu-button" (click)="openSelectMenu()">
    {{watchlistService.currentWatchlist$()!.name}}
    <i [class]='"bi bi-chevron-" + (isSelectMenuOpen()? "up" : "down")'></i>
  </button>

  <div class="action-buttons-container">
    <button type="button" class="icon-button" (click)="onAddCoinsClick()">
      <i class="bi bi-plus-circle"></i>
    </button>
    <button type="button" class="icon-button" (click)="openNameForm('edit')">
      <i class="bi bi-pencil-square"></i>
    </button>
    <button type="button" class="icon-button" (click)="onDeleteClick()">
      <i class="bi bi-trash3"></i>
    </button>
  </div>

  <ul class="select-menu" [class.show]="isSelectMenuOpen()" (msEscapePress)="closeSelectMenu()">
    @for ( wl of watchlistService.watchlists$(); track wl.id ) {
    <li>
      <button type="button" class="menu-item" (click)="onWatchlistSelect(wl.id)">
        {{wl.name}}
      </button>
    </li>
    }
    <li>
      <button type="button" class="menu-item" (click)="openNameForm('create')">
        Add a new watchlist +
      </button>
    </li>
  </ul>

</div>
}

@if (isNameFormOpen()) {
<ms-name-input-pane [isLoading]="isLoading()" [formActionType]="formActionType" [object]="'Watchlist'"
  (paneClose)="closeNameForm()" (nameSubmit)="onNameFormSubmit($event)" />
}